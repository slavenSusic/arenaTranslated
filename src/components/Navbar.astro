---
import { Astronav, MenuItems, MenuIcon, Dropdown, DropdownItems, DropdownSubmenu } from "astro-navbar";
import { getLangFromUrl, useTranslations } from '../i18n/utils';
import logo from '../assets/digitalarena.png'
import LanguagePicker from "./LanguagePicker.astro";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<header class="lg:flex justify-between p-0 lg:p-5 gap-5 mx-auto z-50 absolute top-0 left-0 w-full h-auto bg-transparent transition-all duration-400 text-white items-center ">
  <Astronav closeOnClick>
    <div class="flex w-full lg:w-auto justify-between">
      <img src={logo.src} alt="logo" class="w-1/5 hidden lg:block">
      <div class="block lg:hidden">
        <MenuIcon class="w-6 h-6 text-white m-2" />
      </div>
    </div>
    <MenuItems class="hidden lg:flex lg:px-0">
      <ul class="flex flex-col lg:flex-row lg:gap-5 w-1/3 h-screen lg:h-auto lg:w-full lg:w bg-green-500 lg:bg-transparent text-white">

        <li class="mb-1">
          <a class="block text-xl font-semibold text-white hover:text-green-600 rounded" href={`/${lang}/`}>{t('nav.home')}</a>
        </li>

        <Dropdown class="group">
          <button class="flex items-center">
            <li class="mb-1">
              <a class="block text-xl font-semibold text-white hover:text-green-600 rounded" href={`/${lang}/services`}>{t('nav.services')}</a>
            </li>
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="3" stroke="currentColor" class="w-3 h-3 mt-0.5 group-open:rotate-180">
              <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5"></path>
            </svg>
          </button>
          <DropdownItems class="relative">
            <div class="lg:absolute top-2 w-40 border shadow rounded p-2">
              <ul>
                <li>
                  <a href="#">service1</a>
                </li>
                <li>
                  <a href="#">Menu 2</a>
                </li>
                <!-- More dropdown items... -->
              </ul>
            </div>
          </DropdownItems>
        
        </Dropdown>

        <!-- More menu items... -->

        <li class="mb-1">
          <a class="block text-xl font-semibold text-white hover:text-green-600 rounded whitespace-nowrap" href={`/${lang}/about/`}>{t('nav.about')}</a>
        </li>
        <li class="mb-1">
          <a class="block text-xl font-semibold text-white hover:text-green-600 rounded" href="/">{t('nav.home')}</a>
        </li>
        <li>
         <LanguagePicker />
        </li>
      </ul>
    
    </MenuItems>

    <!-- Include LanguagePicker within the Astronav -->
   
  </Astronav>
</header>
